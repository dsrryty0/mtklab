<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
  <title>å¯¶è— Â· åŸå¸‚å®šå‘</title>
  <style>
    :root{
      --black:#141414;--red:#EE2922;--blue:#2563EB;--green:#16A34A;
      --yellow:#FBBF16;--white:#fff;--light:#F5F5F5;--mid:#e6e6e6;--text:#2f2f2f;
      --radius:18px;--shadow:0 8px 24px rgba(0,0,0,.08);
      --shadow-strong:5px 5px 0 rgba(0,0,0,.88);--stroke:2.5px solid var(--black);
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{height:100%;margin:0;padding:0;font-family:-apple-system,sans-serif;background:var(--light);color:var(--text)}
    #app{height:100%;display:flex;flex-direction:column;overflow:hidden}
    header{flex-shrink:0;background:var(--black);color:var(--white);padding:12px 14px;display:flex;justify-content:space-between;align-items:center;z-index:50}
    .header-mickey{display:flex;align-items:center;gap:10px;cursor:pointer}
    .page{display:none;flex:1;width:100%;overflow-y:auto;padding-bottom:40px}
    .page.active{display:block}
    .container{width:100%;max-width:420px;margin:0 auto;padding:16px}
    .btn{width:100%;max-width:340px;height:54px;border-radius:999px;border:none;font-size:16px;font-weight:900;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin:0 auto}
    .btn-yellow{background:var(--yellow);color:var(--black);box-shadow:4px 4px 0 #c09000}
    .btn-red{background:var(--red);color:#fff;box-shadow:4px 4px 0 #9e1a11}
    .card{background:var(--white);border-radius:var(--radius);padding:18px;margin-bottom:14px;box-shadow:var(--shadow)}
    .input{width:100%;height:54px;border-radius:16px;border:2px solid var(--mid);padding:0 16px;font-size:16px;outline:none}
    .route-card{border:var(--stroke);padding:18px;border-radius:18px;margin-bottom:16px;display:flex;align-items:center;gap:15px;background:#fff;box-shadow:var(--shadow-strong)}
    .station-item{background:#fff;border:2px solid var(--mid);padding:15px;border-radius:15px;margin-bottom:10px;display:flex;align-items:center;gap:12px}
    .station-num{width:36px;height:36px;border-radius:50%;background:var(--black);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:900;flex-shrink:0}
    .locked{opacity:0.5;pointer-events:none}
    textarea{width:100%;height:80px;border-radius:12px;border:1px solid #ccc;padding:10px;margin-top:10px}
    .hidden{display:none}
  </style>
</head>
<body>
<div id="app">
  <header>
    <div class="header-mickey" onclick="goHome()"><strong>ğŸ’ å¯¶è— Â· åŸå¸‚å®šå‘</strong></div>
    <div id="user-display" style="font-size:12px;background:var(--yellow);color:#000;padding:2px 8px;border-radius:10px;display:none"></div>
  </header>

  <!-- 1. å…¥å£é  -->
  <section id="page-gate" class="page active">
    <div class="container" style="text-align:center;padding-top:50px">
      <h1>ğŸ‘‹ æ­¡è¿åƒåŠ </h1>
      <p>è«‹è¼¸å…¥ä½ çš„éšŠåæˆ–å§“åé–‹å§‹å†’éšª</p>
      <input id="player-name" class="input" placeholder="ä¾‹å¦‚ï¼šå°‹å¯¶å°éšŠ" />
      <div id="gate-error" style="color:red;margin:10px 0;font-size:14px"></div>
      <button class="btn btn-yellow" onclick="enterSite()">ğŸš€ é–‹å§‹æ¢ç´¢</button>
    </div>
  </section>

  <!-- 2. è·¯ç·šé¸æ“‡ -->
  <section id="page-routes" class="page">
    <div class="container">
      <h2>é¸æ“‡ä½ çš„è·¯ç·š</h2>
      <div class="route-card" onclick="selectRoute('a')">
        <div style="font-size:30px">ğŸ™ï¸</div>
        <div><strong>A çµ„ Â· æ¸¯å³¶èˆŠæ™‚å…‰ç·š</strong><br><small>ç­²ç®•ç£ â†’ ç£ä»” â†’ å¥§é‹</small></div>
      </div>
      <div class="route-card" onclick="selectRoute('b')">
        <div style="font-size:30px">ğŸŒ¿</div>
        <div><strong>B çµ„ Â· æ±éµæ–‡è„ˆç·š</strong><br><small>ä¸Šæ°´ â†’ æ²™ç”° â†’ å¥§é‹</small></div>
      </div>
    </div>
  </section>

  <!-- 3. ç«™é»åˆ—è¡¨ -->
  <section id="page-list" class="page">
    <div class="container">
      <h2 id="list-title">ç«™é»åˆ—è¡¨</h2>
      <div id="station-list"></div>
      <button class="btn" style="background:#ccc" onclick="goToPage('page-routes')">è¿”å›</button>
    </div>
  </section>

  <!-- 4. ç«™é»ä»»å‹™ -->
  <section id="page-detail" class="page">
    <div class="container">
      <h2 id="detail-name">ç«™é»åç¨±</h2>
      <div class="card" style="background:#fffbe6">
        <small>ğŸ“œ è©©æ„è¬èª</small>
        <p id="detail-poem" style="font-weight:bold"></p>
      </div>
      <div class="card">
        <strong>ğŸ” å¼•å­å•é¡Œ</strong>
        <p id="detail-intro-q" style="font-size:14px"></p>
        <textarea id="ans-intro" placeholder="è¼¸å…¥è§€å¯Ÿçµæœ..."></textarea>
      </div>
      <div class="card">
        <strong>ğŸ“ é€šé—œæŒ‘æˆ°</strong>
        <p id="detail-main-q" style="font-size:14px"></p>
        <textarea id="ans-main" placeholder="è¼¸å…¥æŒ‘æˆ°ç­”æ¡ˆ..."></textarea>
      </div>
      <div class="card" style="border:2px solid var(--green)">
        <strong>ğŸ“¸ åˆç…§æŒ‘æˆ°</strong>
        <p id="detail-photo-q" style="font-size:14px"></p>
        <label><input type="checkbox" id="photo-check"> æˆ‘å€‘å·²å®Œæˆ 7 äººåˆç…§</label>
      </div>
      <button class="btn btn-red" onclick="submitStation()">âœ… å®Œæˆæ­¤ç«™</button>
    </div>
  </section>

  <!-- 5. çµ‚é»é  -->
  <section id="page-finish" class="page">
    <div class="container" style="text-align:center;padding-top:40px">
      <div style="font-size:60px">ğŸ†</div>
      <h2>æŒ‘æˆ°å®Œæˆï¼</h2>
      <div class="card" style="text-align:left">
        <strong>ğŸ“ çµ‚é»é›†åˆï¼šæµ·è¼é“å…¬åœ’</strong>
        <p>è«‹å‰å¾€å¥§é‹ç«™ A å‡ºå£ï¼Œæ­¥è¡Œè‡³æµ·è¼é“å…¬åœ’èˆ‡å…¶ä»–éšŠä¼åŒ¯åˆã€‚</p>
      </div>
      <button class="btn btn-yellow" onclick="alert('è­‰æ›¸åŠŸèƒ½ç”Ÿæˆä¸­...')">ğŸ“œ ä¸‹è¼‰å®Œæˆè­‰æ›¸</button>
    </div>
  </section>
</div>

<script>
const routesData = {
  a: {
    name: "æ¸¯å³¶èˆŠæ™‚å…‰ç·š",
    stations: [
      { name: "ç­²ç®•ç£å¤©åå»Ÿ", poem: "æ³¢æ¿¤å¥³ç¥å®ˆæ±å€ï¼Œç´…æ¬„å¤æ®¿è—æ¼å¯¶ã€‚", intro: "æŠµé”å»Ÿå‰ï¼Œçœ‹åˆ°å¤šå°‘é–“èˆ‡æ¼æ¥­æœ‰é—œçš„åº—ï¼Ÿ", main: "æ‰¾å‡ºå»Ÿå…§æœ€å¤§é¦™çˆä¸Šçš„å¹´ä»½ã€‚", photo: "å§¿å‹¢ï¼šç¥ˆç¦å°‹å¯¶" },
      { name: "è¥¿ç£æ²³å¤ªå®‰æ¨“", poem: "èˆŠæ¨“å•†å ´è—å°é£Ÿæ—ï¼Œåœ°é“å‘³é“å®ˆæ±å€ã€‚", intro: "å…¥å£è™•èƒ½çœ‹åˆ°å¤šå°‘å€‹æ‹›ç‰Œï¼Ÿ", main: "è¨˜éŒ„ä¸€å®¶é£Ÿæª”åæœ€å¾Œä¸€å€‹å­—ã€‚", photo: "å§¿å‹¢ï¼šå“å˜—éš±è—å¯¶" }
      // æ­¤è™•å¯æŒ‰æ–‡æ¡ˆç¹¼çºŒæ·»åŠ è‡³ 10 å€‹
    ]
  },
  b: {
    name: "æ±éµæ–‡è„ˆç·š",
    stations: [
      { name: "ç²‰å¶ºåœ", poem: "å¤è€åœæ‘å®ˆåŒ—å€ï¼Œç‰†å…§éš±è—å‚³çµ±å¯¶è—ã€‚", intro: "è§€å¯Ÿè·¯é‚Šè¡—é“ï¼Œèˆ‡å¸‚å€æœ‰ä½•ä¸åŒï¼Ÿ", main: "é–€æ¨“å°è¯ä¸Šè¯æœ€å¾Œä¸‰å€‹å­—ã€‚", photo: "å§¿å‹¢ï¼šå®ˆè­·åœæ‘" },
      { name: "éµè·¯åšç‰©é¤¨", poem: "èˆŠè»Œé“è¨´èªªå¾€äº‹ï¼Œé‹¼éµè»Šå»‚è¼‰ç™¾å¹´æƒ…ã€‚", intro: "èˆŠè»Šç«™å»ºç¯‰èˆ‡ç¾ä»£è»Šç«™æœ‰ä½•ä¸åŒï¼Ÿ", main: "æŠ„ä¸‹ä»»ä¸€è»Šå¡ç·¨è™Ÿä¸¦æ•¸å­—ç›¸åŠ ã€‚", photo: "å§¿å‹¢ï¼šæ‡·èˆŠåˆ—è»Š" }
    ]
  }
};

let state = {
  name: "",
  route: null,
  currentIdx: 0,
  progress: 0
};

function goToPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById(id).scrollTop = 0;
}

function enterSite() {
  const name = document.getElementById('player-name').value.trim();
  if (!name) {
    document.getElementById('gate-error').innerText = "è«‹è¼¸å…¥åå­—ï¼";
    return;
  }
  state.name = name;
  document.getElementById('user-display').innerText = name;
  document.getElementById('user-display').style.display = "block";
  goToPage('page-routes');
}

function selectRoute(key) {
  state.route = key;
  state.progress = 0;
  renderList();
  goToPage('page-list');
}

function renderList() {
  const list = document.getElementById('station-list');
  list.innerHTML = "";
  const data = routesData[state.route];
  document.getElementById('list-title').innerText = data.name;

  data.stations.forEach((s, i) => {
    const isLocked = i > state.progress;
    const item = document.createElement('div');
    item.className = `station-item ${isLocked ? 'locked' : ''}`;
    item.innerHTML = `
      <div class="station-num">${i + 1}</div>
      <div><strong>${s.name}</strong><br><small>${isLocked ? 'ğŸ”’ å¾…è§£é–' : 'ğŸ”“ å¯æŒ‘æˆ°'}</small></div>
    `;
    item.onclick = () => { if(!isLocked) openStation(i); };
    list.appendChild(item);
  });
}

function openStation(i) {
  state.currentIdx = i;
  const s = routesData[state.route].stations[i];
  document.getElementById('detail-name').innerText = s.name;
  document.getElementById('detail-poem').innerText = s.poem;
  document.getElementById('detail-intro-q').innerText = s.intro;
  document.getElementById('detail-main-q').innerText = s.main;
  document.getElementById('detail-photo-q').innerText = s.photo;
  
  // æ¸…ç©ºè¼¸å…¥
  document.getElementById('ans-intro').value = "";
  document.getElementById('ans-main').value = "";
  document.getElementById('photo-check').checked = false;
  
  goToPage('page-detail');
}

function submitStation() {
  const intro = document.getElementById('ans-intro').value.trim();
  const main = document.getElementById('ans-main').value.trim();
  const photo = document.getElementById('photo-check').checked;

  if (!intro || !main || !photo) {
    alert("è«‹å®Œæˆæ‰€æœ‰ä»»å‹™åŠå‹¾é¸åˆç…§ç¢ºèªï¼");
    return;
  }

  alert("æœ¬ç«™ä»»å‹™å·²è¨˜éŒ„ï¼");
  
  if (state.currentIdx === state.progress) {
    state.progress++;
  }

  const total = routesData[state.route].stations.length;
  if (state.progress >= total) {
    goToPage('page-finish');
  } else {
    renderList();
    goToPage('page-list');
  }
}

function goHome() {
  if (state.name) goToPage('page-routes');
  else goToPage('page-gate');
}
</script>
</body>
</html>
